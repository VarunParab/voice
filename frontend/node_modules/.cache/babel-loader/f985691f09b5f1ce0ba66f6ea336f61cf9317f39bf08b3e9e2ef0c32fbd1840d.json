{"ast":null,"code":"var _jsxFileName = \"/Users/varun/Developer/bot-voice/frontend/src/AudioRecorder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AudioRecorder = ({\n  onTranscriptionComplete\n}) => {\n  _s();\n  const [isRecording, setIsRecording] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      mediaRecorderRef.current = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n      mediaRecorderRef.current.ondataavailable = event => {\n        audioChunksRef.current.push(event.data);\n      };\n      mediaRecorderRef.current.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, {\n          type: 'audio/m4a'\n        });\n        await sendAudioToServer(audioBlob);\n      };\n      mediaRecorderRef.current.start();\n      setIsRecording(true);\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n      alert('Error accessing microphone. Please ensure you have granted microphone permissions.');\n    }\n  };\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      setIsProcessing(true);\n\n      // Stop all audio tracks\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n    }\n  };\n  const sendAudioToServer = async audioBlob => {\n    try {\n      const formData = new FormData();\n      formData.append('file', audioBlob, 'audio.m4a');\n      const response = await fetch('http://localhost:8000/transcribe', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error('Transcription failed');\n      }\n      const data = await response.json();\n      onTranscriptionComplete(data.transcription);\n    } catch (error) {\n      console.error('Error sending audio to server:', error);\n      alert('Error processing audio. Please try again.');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"audio-recorder\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: isRecording ? stopRecording : startRecording,\n      disabled: isProcessing,\n      className: `record-button ${isRecording ? 'recording' : ''} ${isProcessing ? 'processing' : ''}`,\n      children: isProcessing ? 'Processing...' : isRecording ? 'Stop Recording' : 'Start Recording'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n        .audio-recorder {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 40px;\n        }\n        .record-button {\n          padding: 8px 16px;\n          font-size: 14px;\n          border-radius: 20px;\n          border: none;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          background-color: #4CAF50;\n          color: white;\n          height: 40px;\n          min-width: 120px;\n          white-space: nowrap;\n        }\n        .record-button:hover {\n          background-color: #45a049;\n        }\n        .record-button.recording {\n          background-color: #f44336;\n          animation: pulse 1.5s infinite;\n        }\n        .record-button.processing {\n          background-color: #9e9e9e;\n          cursor: not-allowed;\n        }\n        @keyframes pulse {\n          0% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.05);\n          }\n          100% {\n            transform: scale(1);\n          }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(AudioRecorder, \"M3M2S3eczigosC+aRUWP75shTKw=\");\n_c = AudioRecorder;\nexport default AudioRecorder;\nvar _c;\n$RefreshReg$(_c, \"AudioRecorder\");","map":{"version":3,"names":["React","useState","useRef","jsxDEV","_jsxDEV","AudioRecorder","onTranscriptionComplete","_s","isRecording","setIsRecording","isProcessing","setIsProcessing","mediaRecorderRef","audioChunksRef","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","current","MediaRecorder","ondataavailable","event","push","data","onstop","audioBlob","Blob","type","sendAudioToServer","start","error","console","alert","stopRecording","stop","getTracks","forEach","track","formData","FormData","append","response","fetch","method","body","ok","Error","json","transcription","className","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","jsx","_c","$RefreshReg$"],"sources":["/Users/varun/Developer/bot-voice/frontend/src/AudioRecorder.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\n\nconst AudioRecorder = ({ onTranscriptionComplete }) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      mediaRecorderRef.current = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n\n      mediaRecorderRef.current.ondataavailable = (event) => {\n        audioChunksRef.current.push(event.data);\n      };\n\n      mediaRecorderRef.current.onstop = async () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/m4a' });\n        await sendAudioToServer(audioBlob);\n      };\n\n      mediaRecorderRef.current.start();\n      setIsRecording(true);\n    } catch (error) {\n      console.error('Error accessing microphone:', error);\n      alert('Error accessing microphone. Please ensure you have granted microphone permissions.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      setIsProcessing(true);\n      \n      // Stop all audio tracks\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n    }\n  };\n\n  const sendAudioToServer = async (audioBlob) => {\n    try {\n      const formData = new FormData();\n      formData.append('file', audioBlob, 'audio.m4a');\n\n      const response = await fetch('http://localhost:8000/transcribe', {\n        method: 'POST',\n        body: formData,\n      });\n\n      if (!response.ok) {\n        throw new Error('Transcription failed');\n      }\n\n      const data = await response.json();\n      onTranscriptionComplete(data.transcription);\n    } catch (error) {\n      console.error('Error sending audio to server:', error);\n      alert('Error processing audio. Please try again.');\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <div className=\"audio-recorder\">\n      <button\n        onClick={isRecording ? stopRecording : startRecording}\n        disabled={isProcessing}\n        className={`record-button ${isRecording ? 'recording' : ''} ${isProcessing ? 'processing' : ''}`}\n      >\n        {isProcessing ? 'Processing...' : isRecording ? 'Stop Recording' : 'Start Recording'}\n      </button>\n      <style jsx>{`\n        .audio-recorder {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          height: 40px;\n        }\n        .record-button {\n          padding: 8px 16px;\n          font-size: 14px;\n          border-radius: 20px;\n          border: none;\n          cursor: pointer;\n          transition: all 0.3s ease;\n          background-color: #4CAF50;\n          color: white;\n          height: 40px;\n          min-width: 120px;\n          white-space: nowrap;\n        }\n        .record-button:hover {\n          background-color: #45a049;\n        }\n        .record-button.recording {\n          background-color: #f44336;\n          animation: pulse 1.5s infinite;\n        }\n        .record-button.processing {\n          background-color: #9e9e9e;\n          cursor: not-allowed;\n        }\n        @keyframes pulse {\n          0% {\n            transform: scale(1);\n          }\n          50% {\n            transform: scale(1.05);\n          }\n          100% {\n            transform: scale(1);\n          }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default AudioRecorder; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}